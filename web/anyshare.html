<!doctype html>
<html lang="en">

<head>
  <!-- The following 2 meta tags always come first -->
  <!-- Notify browsers this page is in Unicode -->
  <meta charset="utf-8">
  <!-- This site is responsive. Use full screen width. -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Anything Shared</title>

  <meta name="description" content="Anything Shared">
  <meta name="keywords" content="anything shared">  

  <link rel="stylesheet" href="https://unpkg.com/spectre.css/dist/spectre.min.css">
  <link rel="stylesheet" href="https://unpkg.com/spectre.css/dist/spectre-exp.min.css">
  <link rel="stylesheet" href="https://unpkg.com/spectre.css/dist/spectre-icons.min.css">

  <style type="text/css">
    .pseudoLink {
      color: blue;
      text-decoration: underline;
      cursor: pointer;
    }

    .elementToFadeOut {
        animation-name: fadeOut;
        animation-duration: 4s;
        opacity: 0;
    }

    @keyframes fadeOut {
      0% { opacity: 1; }
      100% { opacity: 0; }
    }
  </style>

  <script src="https://unpkg.com/vue"></script>
</head>

<body class="text-center">
  <div class="container grid-xs">
  
  <h3 style="margin-top: .4rem; margin-bottom: 0rem">Anything Shared</h3>

  <div id="navigation">
    <div v-if="app_state == 'USER_LIST'">
      <ul class="breadcrumb">
        <li class="breadcrumb-item">Home</li>
      </ul> 
    </div>
    <div v-else-if="app_state == 'ITEM_LIST'">
      <ul class="breadcrumb">
        <li class="breadcrumb-item"><span v-on:click="onClick('USER_LIST')" class="pseudoLink">Home</span></li>
        <li class="breadcrumb-item">Item List</li>
      </ul> 
    </div>
    <div v-else-if="app_state == 'ITEM_VIEW'">
      <ul class="breadcrumb">
        <li class="breadcrumb-item"><span v-on:click="onClick('USER_LIST')" class="pseudoLink">Home</span></li>
        <li class="breadcrumb-item"><span v-on:click="onClick('ITEM_LIST')" class="pseudoLink">Item List</span></li>
        <li class="breadcrumb-item">Item View</li>
      </ul> 
    </div>
    <div v-else-if="app_state == 'RESERVATIONS'">
      <ul class="breadcrumb">
        <li class="breadcrumb-item"><span v-on:click="onClick('USER_LIST')" class="pseudoLink">Home</span></li>
        <li class="breadcrumb-item"><span v-on:click="onClick('ITEM_LIST')" class="pseudoLink">Item List</span></li>
        <li class="breadcrumb-item"><span v-on:click="onClick('ITEM_VIEW')" class="pseudoLink">Item View</span></li>
        <li class="breadcrumb-item">Reservations</li>
      </ul> 
   </div>
  </div>

  <div class="divider" style="margin-bottom: 14px"></div>

  <div id="user_list" style="display: none">
    <table class="table table-striped table-hover c-hand">
      <thead>
        <tr>
          <th>Mug Shot</th>
          <th>User</th>
          <th>Phone Number</th>
        </tr>
      </thead>
      <tbody>
        <tr v-for="user in users" v-on:click="user_onClick(user)">
          <td>
            <img v-bind:src="'/media/' + user.phone_number + '.jpg'" style="width:80px; height:106px">
          </td>
          <td>
            <span class="pseudoLink">
              {{ user.user_name }} 
            </span>
          </td>
          <td>{{ user.phone_number}}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div id="item_list" style="display: none">
    <table class="table table-striped table-hover c-hand">
      <thead>
        <tr>
          <th>Item</th>
        </tr>
      </thead>
      <tbody>
        <tr v-for="item in items" v-on:click="item_onClick(item)">
          <td>
            <span class="pseudoLink">
              {{ item.name }}
            </span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div id="item_view" style="display: none">
    <h4>{{ name }}</h4>
    <div v-if="status.active == 'false'" class="container">
      <div class="columns">
        <div class="col-4">
          <div style="line-height: 1.8rem">Current Status</div>
        </div>
        <div class="col-4">
          <div class="text-center text-success" style="line-height: 1.8rem">Inactive</div>
        </div>
        <div class="col-4">
          <button v-on:click="activate_onClick()" class="btn btn-primary">Activate</button>
        </div>
      </div>
    </div>
    <div v-if="status.active == 'true'" class="container">
      <div class="columns">
        <div class="col-4">
          <div style="line-height: 1.8rem">Current Status</div>
        </div>
        <div class="col-4">
          <div class="text-center text-error" style="line-height: 1.8rem">Active - {{ status.user_name }}</div>
        </div>
        <div class="col-4">
          <button v-on:click="deactivate_onClick()" class="btn btn-primary" :disabled="!active_user">Deactivate</button>
        </div>
      </div>
    </div>
    
    <div class="divider" style="margin-top: 1.5rem; margin-bottom: 1.5rem" data-content="Reservations"></div>
 
    <div class="container">
      <div class="columns text-left">
        <div class="col-2"></div>
        <div class="col-4">Start Date</div>
        <div class="col-5">
          <input v-on:change="updateAvailability()" style="width: 155px" v-model="date" type="date" :min="today">
        </div>
      </div>
      <div class="columns text-left" style="margin-top: .4rem">
        <div class="col-2"></div>
        <div class="col-4">Number of Days</div>
        <div class="col-5">
          <input v-on:change="updateAvailability()" style="width: 40px" v-model="days" type="number" min="0">
        </div>
      </div>
      <div v-if="days > 0" style="margin-top: .4rem">
        <span v-if="available" class="text-success">{{ availabilityMessage }}</span>
        <span v-if="!available" class="text-error">{{ availabilityMessage }}</span>
      </div>
      <div style="margin-top: .6rem">
        <button v-on:click="reserve_onClick()" class="btn btn-primary" :disabled="!available">Reserve</button>
      </div>
      <div style="margin-top: 1rem">
        <span v-on:click="reservations_onClick()" class="pseudoLink">Existing Reservations</span>
      </div>
    </div>
  </div>

  <div id="reservations" style="display:none">
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th>Date</th>
          <th>User</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr v-for="reservation in reservations">
          <td>{{ reservation.date }}</td>
          <td>{{ reservation.user_name }}</td>
          <td>
            <button v-if="reservation.phone_number == current_phone_number"
                v-on:click="delete_onClick(reservation)" class="btn btn-primary">
              Delete
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  </div>

  <script src="../web/anyshare.js"></script>
</body>
